<!doctype html>
<html lang="en">	
<head>
	{% load static %}
	<!-- Bootstrap CSS files-->
	<link rel="stylesheet" href="{% static 'main/css/bootstrap.css' %}">

	<!-- Google Open Sans web font -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,600,700" rel="stylesheet">

	<!-- Font Awesome Web Icons -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

	<script src="https://www.chartjs.org/dist/2.8.0/Chart.min.js"></script>
	<script src="https://www.chartjs.org/samples/latest/utils.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<meta charset="UTF-8">
    <title></title>
    <script src="http://d3js.org/d3.v3.min.js" language="JavaScript"></script>
    <script src="{% static 'main/js/liquidFillGauge.js' %}"></script>
    <style>
        .liquidFillGaugeText { font-family: Helvetica; font-weight: bold; }
    </style>

	<style>
	canvas{
		-moz-user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}
	</style>
</head>


<body>
	<div class="row"></div>
	<bs-docs-section>
		<div class="row">
			<div class="col-4">
				<svg id="fillgauge1" width="25%" height="200" onclick="gauge1.update(NewValue());"></svg>
				<svg id="fillgauge2" width="25%" height="200" onclick="gauge2.update(NewValue());"></svg>
			</div>
			<div class="col-4">
				<div class="page-header">
					<img src="{% static 'main/img/trek.jpg' %}" alt="trek logo" style="width: 100%;height: 120px">
				</div>
				<bs-component>
					<div class="jumbotron" style="padding: 20px">
						<div class="col">
							<div class="list-group">
								{% for tweet in Tweets %}
								<a class="list-group-item list-group-item-action flex-column align-items-start active" href="#">
									<div class="d-flex w-100 justify-content-between" style="height: 50px">
										<h5 class="mb-1">{{tweet.tweet_user_user_name}}</h5>
										<small>{{tweet.tweet_created_at}}</small>
									</div>
									<p class="m-0">{{tweet.tweet_text}}</p>
									<small>{{tweet.tweet_user_location}}</small>
								</a>
								{% endfor %}
							</div>
						</div>
					</div> 
				</bs-component>
			</div>
			<div class="col-4">
				<div class="media">
					<img src="{% static 'main/img/wordcloud.png' %}" alt="wordcloud" style="width: 100%;height: 400px">
				</div>
				<div>
					<div style="width:100%;">
						<canvas id="canvas"></canvas>
					</div>
					<br>
					<br>
					<button id="randomizeData">Randomize Data</button>
					<button id="addDataset">Add Dataset</button>
					<button id="removeDataset">Remove Dataset</button>
					<button id="addData">Add Data</button>
					<button id="removeData">Remove Data</button>
					<script type="text/javascript" src="{% static 'main/js/24hourchart.js' %}"></script>
				</div>
			</div>
		</div>
	</bs-docs-section>
	</div>

	<script language="JavaScript">
		var count = 0;
		var male = 0;
		var female = 0;
		var Twitter_Userss = unescape('{{Twitter_Users | escapejs}}');
		var Twitter_Users = JSON.parse(Twitter_Userss);
		var tweet_places = unescape('{{tweet_place | escapejs}}');
		var tweet_place = JSON.parse(tweet_places);
		console.log(Twitter_Users)
		for (user in Twitter_Users['data']) {
			if (Twitter_Users['data'][user]=="male") {
				male+=1;
			} else {
				female+=1;
			}
		}
		for (locations in tweet_place['places']) {
			if (tweet_place['places'][locations]!='null') {
				count+=1;
			}
		}
		console.log("count");
		console.log(count);
		console.log("male")
		console.log(male)
		console.log("female")
		console.log(female)
		console.log(male/(female+male))
    	var config1 = liquidFillGaugeDefaultSettings();
    	config1.circleColor = "#FF7777";
    	config1.textColor = "#FF4444";
    	config1.waveTextColor = "#FFAAAA";
    	config1.waveColor = "#FFDDDD";
    	config1.circleThickness = 0.2;
    	config1.circleFillGap = 0.2;
    	config1.textVertPosition = 0.8;
    	config1.waveAnimateTime = 2000;
    	config1.waveHeight = 0.3;
    	config.waveCount = 1;
    	var config2 = liquidFillGaugeDefaultSettings();
    	config2.circleThickness = 0.2;
    	config2.circleFillGap = 0.2;
    	config2.textVertPosition = 0.8;
    	config2.waveAnimateTime = 2000;
    	config2.waveHeight = 0.3;
    	config2.waveCount = 1;

    	var gauge1 = loadLiquidFillGauge("fillgauge1", 100*male/(male+female),config2);
    	var gauge2= loadLiquidFillGauge("fillgauge2", 100*female/(male+female), config1);
    	function NewValue(){
        	if(Math.random() > .5){
            	return Math.round(Math.random()*100);
        	} else {
            	return (Math.random()*100).toFixed(1);
        	}
    	}
</script>

</body>

<script>
	function fetchwordcloud(){
		$.ajax({
			method:"GET",
			url:'{{ 'test/' }}',
			success:function() {
				console.log("done");
				//alert("done");
			}});
	}

	$(document).ready(function(){
		setInterval(fetchwordcloud,5000);
	});
</script>

</html>
